# infinite-chat

ğŸ¤– **æ— é™ä¸Šä¸‹æ–‡** Â· **å¤š Agent ç¾¤èŠ** Â· **å¤šå¹³å°æ¥å…¥** Â· **æ’ä»¶ç³»ç»Ÿ**

ä¸€ä¸ªç±»ä¼¼ AstrBot çš„èŠå¤©æœºå™¨äººæ¡†æ¶ï¼Œæ”¯æŒ Mem0 ä½œä¸ºé•¿æœŸè®°å¿†å±‚ï¼Œæ”¯æŒå¤š Agent åä½œã€‚

**GitHub**: https://github.com/lukelzlz/infinite-chat

## ç‰¹æ€§

- âœ… **æ— é™ä¸Šä¸‹æ–‡**: çŸ­æœŸæ»‘åŠ¨çª—å£ + Mem0 é•¿æœŸè®°å¿† + è‡ªåŠ¨å‹ç¼©
- âœ… **å¤š Agent ç¾¤èŠ**: æ”¯æŒå¤šä¸ª AI Agent åä½œï¼Œç¾¤èŠä¸­ Agent å¯äº’ç›¸å“åº”
- âœ… **å¤šç”¨æˆ·éš”ç¦»**: æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹ä¼šè¯å’Œä¸Šä¸‹æ–‡
- âœ… **å¤šå¹³å°æ”¯æŒ**: Telegramã€Discordã€é£ä¹¦ã€**Misskey**ã€Web Chat
- âœ… **å¤š LLM æ”¯æŒ**: OpenAIã€Anthropicã€æœ¬åœ°æ¨¡å‹(Ollama)ã€SiliconFlow
- âœ… **æ’ä»¶ç³»ç»Ÿ**: å¯æ‰©å±•çš„æ’ä»¶æ¶æ„
- âœ… **TypeScript**: å®Œæ•´ç±»å‹æ”¯æŒ

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         infinite-chat Framework               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¡ é€‚é…å™¨å±‚                                  â”‚
â”‚    Telegram | Discord | é£ä¹¦ | Misskey       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– å¤š Agent å±‚                               â”‚
â”‚    Agent é€‰æ‹© | ç¾¤èŠåä½œ | é“¾å¼å“åº”           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§  æ ¸å¿ƒå¼•æ“                                   â”‚
â”‚    â”œâ”€ æ— é™ä¸Šä¸‹æ–‡ (æ»‘åŠ¨çª—å£ + Mem0)           â”‚
â”‚    â”œâ”€ å¤šç”¨æˆ·ä¼šè¯éš”ç¦»                          â”‚
â”‚    â””â”€ æ¶ˆæ¯è·¯ç”±                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”Œ LLM å±‚                                    â”‚
â”‚    OpenAI | Anthropic | Ollama | SiliconFlow â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§© æ’ä»¶ç³»ç»Ÿ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½² (æ¨è)

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/lukelzlz/infinite-chat.git
cd infinite-chat

# 2. åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥ä½ çš„ API Key

# 3. å¯åŠ¨æœåŠ¡
docker compose up -d

# 4. è®¿é—® Web UI
open http://localhost:3000
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

#### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp config/config.yaml.example config/config.yaml

# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="your-api-key"
export TELEGRAM_BOT_TOKEN="your-telegram-token"
export MEM0_API_KEY="your-mem0-key"  # å¯é€‰
```

### 3. å¯åŠ¨

```typescript
import { quickStart } from 'chatbot-framework';

const engine = await quickStart();
console.log('Bot started!', engine.getStatus());
```

## é…ç½®è¯´æ˜

### config.yaml

```yaml
# LLM é…ç½®
llm:
  provider: openai  # openai | anthropic | local
  model: gpt-4o-mini
  apiKey: ${OPENAI_API_KEY}
  maxTokens: 4096
  temperature: 0.7

# è®°å¿†é…ç½®
memory:
  shortTermWindow: 20    # çŸ­æœŸè®°å¿†ä¿ç•™æ¶ˆæ¯æ•°
  compressThreshold: 50  # è§¦å‘å‹ç¼©çš„æ¶ˆæ¯æ•°

# é€‚é…å™¨
adapters:
  - type: telegram
    enabled: true
    config:
      token: ${TELEGRAM_BOT_TOKEN}

# æ’ä»¶
plugins:
  enabled:
    - echo
    - help
```

## æ ¸å¿ƒæ¦‚å¿µ

### æ— é™ä¸Šä¸‹æ–‡

æ¡†æ¶å®ç°ä¸‰å±‚è®°å¿†æ¶æ„ï¼š

1. **çŸ­æœŸè®°å¿†**: æ»‘åŠ¨çª—å£ä¿ç•™æœ€è¿‘ N æ¡æ¶ˆæ¯
2. **é•¿æœŸè®°å¿†**: Mem0 è‡ªåŠ¨æå–å’Œå­˜å‚¨é‡è¦ä¿¡æ¯
3. **å‹ç¼©è®°å¿†**: è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨å‹ç¼©æˆæ‘˜è¦

```typescript
// ç”¨æˆ·æ¶ˆæ¯: "æˆ‘å«å¼ ä¸‰ï¼Œæˆ‘å–œæ¬¢ç¼–ç¨‹"
// â†’ Mem0 è‡ªåŠ¨å­˜å‚¨: 
//   - ç”¨æˆ·å: å¼ ä¸‰
//   - å…´è¶£: ç¼–ç¨‹

// åç»­å¯¹è¯
// ç”¨æˆ·: "ç»™æˆ‘æ¨èä¸€äº›é¡¹ç›®"
// â†’ æ£€ç´¢ç›¸å…³è®°å¿† â†’ ç»“åˆä¸Šä¸‹æ–‡å›å¤
```

### å¤šç”¨æˆ·éš”ç¦»

æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ç‹¬ç«‹ä¼šè¯ï¼š

```typescript
// Session ID æ ¼å¼
"telegram:12345"          // ç§èŠ
"telegram:group:-100123"  // ç¾¤èŠ
"discord:67890"           // Discord ç”¨æˆ·
```

### æ’ä»¶ç³»ç»Ÿ

åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶ï¼š

```typescript
import { Plugin, Session } from 'chatbot-framework';

class WeatherPlugin implements Plugin {
  name = 'weather';
  priority = 50;

  shouldHandle(content: string): boolean {
    return content.startsWith('/weather ');
  }

  async handle(content: string, session: Session): Promise<string | null> {
    const city = content.slice(9);
    // è·å–å¤©æ°”ä¿¡æ¯...
    return `${city} ä»Šå¤©æ™´ï¼Œ25Â°C`;
  }
}

// æ³¨å†Œ
engine.registerPlugin(new WeatherPlugin());
```

## API æ–‡æ¡£

### ChatBotEngine

```typescript
// åˆ›å»ºå¼•æ“
const engine = new ChatBotEngine(config);

// å¯åŠ¨/åœæ­¢
await engine.start();
await engine.stop();

// æ³¨å†Œé€‚é…å™¨
engine.registerAdapter(new TelegramAdapter(token));

// æ³¨å†Œæ’ä»¶
engine.registerPlugin(new MyPlugin());

// ä¸»åŠ¨å‘é€æ¶ˆæ¯
await engine.sendMessage('telegram:12345', 'Hello!');

// è·å–çŠ¶æ€
const status = engine.getStatus();

// æ¸…é™¤ä¼šè¯
engine.clearSession('telegram:12345');
```

### é€‚é…å™¨

```typescript
// Telegram
import { TelegramAdapter } from 'chatbot-framework';
const telegram = new TelegramAdapter('BOT_TOKEN');

// è‡ªå®šä¹‰é€‚é…å™¨
class MyAdapter extends PlatformAdapter {
  name = 'my-platform';
  
  async start() { /* ... */ }
  async stop() { /* ... */ }
  async sendMessage(sessionId: string, message: string) { /* ... */ }
  onMessage(callback) { /* ... */ }
}
```

### Mem0 é›†æˆ

```typescript
import { HybridMemoryManager } from 'chatbot-framework';

const memory = new HybridMemoryManager({
  apiKey: 'your-mem0-key',
  // æˆ–ä½¿ç”¨æœ¬åœ°æ¨¡å¼
  localMode: true,
}, 20);

// æ„å»ºå¢å¼ºä¸Šä¸‹æ–‡
const { systemPrompt, relevantMemories } = await memory.buildContext(
  messages,
  userId,
  currentQuery
);
```

## ä¾èµ–

### å¿…éœ€
- Node.js >= 18
- TypeScript >= 5.0

### å¯é€‰
- `openai` - OpenAI API
- `@anthropic-ai/sdk` - Anthropic API
- `grammy` - Telegram Bot
- `discord.js` - Discord Bot
- `mem0ai` - Mem0 SDK

## ç¤ºä¾‹é¡¹ç›®

### ç®€å• Telegram Bot

```typescript
import { ChatBotEngine, TelegramAdapter } from 'chatbot-framework';

const engine = new ChatBotEngine({
  llm: {
    provider: 'openai',
    model: 'gpt-4o-mini',
    apiKey: process.env.OPENAI_API_KEY!,
  },
  memory: {
    shortTermWindow: 20,
    compressThreshold: 50,
  },
  adapters: [],
});

engine.registerAdapter(new TelegramAdapter(process.env.TELEGRAM_TOKEN!));
await engine.start();
```

### æœ¬åœ°æ¨¡å‹ (Ollama)

```typescript
const engine = new ChatBotEngine({
  llm: {
    provider: 'local',
    model: 'llama3',
    baseUrl: 'http://localhost:11434',
  },
  // ...
});
```

## License

MIT
